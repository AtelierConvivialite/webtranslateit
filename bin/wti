#!/usr/bin/env ruby

require 'choice'

Choice.options do

  option :pull do
    desc "Pull target language file(s) from Web Translate It."
  end

  option :push do
    desc "Push master language file(s) to Web Translate It."
  end

  option :add do
    desc "Create a new master language file to Web Translate It."
  end

  option :stats do
    desc "Fetch and display your project statistics."
  end

  option :autoconf do
    desc "Configure your project to sync with Web Translate It."
  end

  separator ''
  separator 'Common options: '
  
  option :locale do
    short '-l'
    long  '--locale'
    desc  "The ISO code of a specific locale to pull or push."
  end
  
  option :config do
    short '-c'
    long  '--config'
    desc  "Path to a translation.yml file. If this option is absent, looks for config/translation.yml."
  end
  
  option :all do
    long  '--all'
    desc  "Respectively download or upload all files."
  end
  
  option :force do
    long  '--force'
    desc  "Force wti pull to re-download the language file, regardless if local version is current."
  end
  
  option :merge do
    long  '--merge'
    desc  "Force WTI to perform a merge of this file with its database."
  end
  
  option :ignore_missing do
    long  '--ignore_missing'
    desc  "Force WTI to not obsolete missing strings."
  end
  
  separator ''
  separator 'Other options: '
  
  option :help do
    long '--help'
    desc 'Show this message'
  end

  option :version do
    short '-v'
    long '--version'
    desc 'Show version'
    action do
      puts ""
      puts "Web Translate It #{WebTranslateIt::Util.version}"
      exit
    end
  end
end

options = Choice.choices
$project_path = File.expand_path(Choice.rest[0])

WebTranslateIt::CommandLine.run(options, $project_path)
